<!-- app/views/forms/new.html.erb -->
<!DOCTYPE html>


<html>
<head>
  <title>FormApp</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= stylesheet_link_tag "new_form" %>

</head>


<section class="main group">
  TEST TEST
  <div class="navdiv">
    <div class="logo"></div>
    <nav>
      <li></li>
      <li></li>
    </nav>
  </div>



  <div class="display1 group">


    <section class='input_field_container'>
      display1
      <ul>
        <li>
          <h3>Please enter your form header attributes here:</h3>
            <%@form = Form.find(params[:id])%>
            <form class="header_field" method='POST' action='/forms/<%=@form.id%>'>
            <input type="hidden" name="_method" value="PUT">

              <label>Form Name: <input
              type="text" name='header[form_name]' value = '<%=@form.form_name%>' ></input></label>
                <br>

              Description: <textarea rows="2" cols="20"
              name='header[description]' ><%=@form.description%></textarea>
              <br>

              <label>Target Url: <input
              type="text" name='header[target_site]' value = '<%=@form.target_site%>'></input></label>

              <br>
              Integrate Captcha? <input type="checkbox"
              name="header[captcha]" value="true" checked>
              <br>
                    <input type="submit" class="submit-button">

            </form>
        </li>

        <%= render "partials/entry" %>


      </ul>
    </section>



      <section class= 'display_field_container'>
      <!-- NOTE SHOULD HAVE EACH BUTTON STYLED SIMILAR TO THE STYLE IT CONTAINS -->
        <div class="style_button_container">
        <nav>
          <button>Style 1</button>
          <button>Style 2</button>
          <button>Style 3</button>
          <button>Style 4</button>
        </nav>
        </div>
        <br>

        <div class='display_field'>
          <ul>
<!-- NOTE: SHOULD CALL RENDER HERE, WITH A DEFAULT BLANK FORM -->
          <%= generate_header(Form.find(params[:id])).html_safe%>
          <br>
          <% if Entry.find_all_by_form_id(params[:id]).any? %>
          <% Entry.find_all_by_form_id(params[:id]).each do |entry| %>
          <!-- NOTE: NEED TO CHANGE HOW IT DISPLAYS LABEL.  SHOULD BE REDUNDANT WITH WORKING LABEL INTEGRATOR ON FORM_FOR -->
          <% @label = entry.as_json["label"] %>
          <%= @label %>
          <br>
          <% @instructions = entry.as_json["instructions"] %>
          Instructions for <%= @label || "this entry" %>: <%= @instructions %>
          <% @form_hash  = entry.as_json.reject {|k,v| v==nil}.reject{|k,v| k=="created_at" || k=="updated_at" || k=="instructions" } %>

          <br>

          <%=form_gen(@form_hash)%>


          <br>

          <% end %>

          <% end %>

        </ul>
        </div>



        <form method='POST' action='forms/<%=params[:id]%>'>
          <input type="hidden" name="_method" value="DELETE">
          <input name="authenticity_token" type="hidden" value='<%= form_authenticity_token%>'>

          <input type="submit" class="submit-button" value="Delete this form">
        </form>

        <!-- NOTE: Not including CRSF TOKEN BELOW -->

        <%= button_to "delete", {:controller => :forms,
              :action => 'destroy', :id => params[:id], value: "Delete ths form" }, :method => :delete %>

      </section>

    </div>



  <div class="footer">
    <div class="logo"></div>
    <nav>
      <li></li>
      <li></li>
    </nav>
    </div>
  </div>

</section>




</html>